-- Modern Mobil&PC Menü + Yürüyerek Coin Farm (Auto-Farm) | made by 847
local player = game.Players.LocalPlayer
local ws = game:GetService("Workspace")
local PathfindingService = game:GetService("PathfindingService")

-- GUI Kurulumu
local gui = Instance.new("ScreenGui")
gui.Parent = player:WaitForChild("PlayerGui")
gui.Name = "ModernMenu847"
gui.ResetOnSpawn = false

local main = Instance.new("Frame")
main.Size = UDim2.new(0, 220, 0, 140)
main.Position = UDim2.new(0.5, -110, 0.65, 0)
main.BackgroundColor3 = Color3.fromRGB(30,32,36)
main.BackgroundTransparency = 0.13
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true
main.Visible = true
main.Parent = gui

local shadow = Instance.new("ImageLabel", main)
shadow.Size = UDim2.new(1,24,1,24)
shadow.Position = UDim2.new(0,-12,0,-12)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://1316045217"
shadow.ImageTransparency = 0.65

local corner = Instance.new("UICorner", main)
corner.CornerRadius = UDim.new(0, 22)

local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1, -36, 0, 38)
title.Position = UDim2.new(0, 18, 0, 6)
title.BackgroundTransparency = 1
title.Text = "MENU"
title.Font = Enum.Font.FredokaOne
title.TextSize = 28
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextStrokeTransparency = 0.7
title.TextXAlignment = Enum.TextXAlignment.Left

local icon = Instance.new("ImageLabel", main)
icon.Size = UDim2.new(0,32,0,32)
icon.Position = UDim2.new(0, -8, 0, 4)
icon.BackgroundTransparency = 1
icon.Image = "rbxassetid://7734068321"
icon.ImageColor3 = Color3.fromRGB(93,156,236)

-- "made by 847" neon animasyonlu
local madeby = Instance.new("TextLabel", main)
madeby.Size = UDim2.new(1, -24, 0, 22)
madeby.Position = UDim2.new(0, 12, 1, -28)
madeby.BackgroundTransparency = 1
madeby.Text = "made by 847"
madeby.Font = Enum.Font.FredokaOne
madeby.TextSize = 17
madeby.TextColor3 = Color3.fromRGB(255,255,255)
madeby.TextStrokeTransparency = 0.35

spawn(function()
    while true do
        for i=0.35,0.1,-0.01 do
            madeby.TextStrokeTransparency = i
            wait(0.03)
        end
        for i=0.1,0.35,0.01 do
            madeby.TextStrokeTransparency = i
            wait(0.03)
        end
    end
end)

local toggleButton = Instance.new("ImageButton", main)
toggleButton.Size = UDim2.new(0, 32, 0, 32)
toggleButton.Position = UDim2.new(1, -40, 0, 4)
toggleButton.BackgroundTransparency = 1
toggleButton.Image = "rbxassetid://6035047389"
toggleButton.ImageColor3 = Color3.fromRGB(180,220,255)

-- Otomatik Farm Butonu
local farmBtn = Instance.new("TextButton", main)
farmBtn.Size = UDim2.new(0.8,0,0,38)
farmBtn.Position = UDim2.new(0.1,0,0.48,0)
farmBtn.BackgroundColor3 = Color3.fromRGB(57,170,225)
farmBtn.BackgroundTransparency = 0.12
farmBtn.Text = "Otomatik Farm: KAPALI"
farmBtn.Font = Enum.Font.FredokaOne
farmBtn.TextSize = 20
farmBtn.TextColor3 = Color3.fromRGB(255,255,255)
local farmBtnCorner = Instance.new("UICorner",farmBtn)
farmBtnCorner.CornerRadius = UDim.new(0,14)

-- Menü Aç/Kapat Animasyonu
local menuOpen = true
toggleButton.MouseButton1Click:Connect(function()
    menuOpen = not menuOpen
    if menuOpen then
        main:TweenSize(UDim2.new(0, 220, 0, 140), "Out", "Quart", 0.25, true)
        for _,v in pairs(main:GetChildren()) do
            if v ~= toggleButton then v.Visible = true end
        end
        toggleButton.Image = "rbxassetid://6035047389"
    else
        main:TweenSize(UDim2.new(0, 60, 0, 45), "Out", "Quart", 0.25, true)
        for _,v in pairs(main:GetChildren()) do
            if v ~= toggleButton and v~=shadow then v.Visible = false end
        end
        toggleButton.Image = "rbxassetid://6031094678"
    end
end)

-- Mobil/PC Sürükleme Desteği
local dragging = false
local dragStart, startPos
main.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = main.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end
end)
main.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
        local delta = input.Position - dragStart
        main.Position = UDim2.new(
            startPos.X.Scale, startPos.X.Offset + delta.X,
            startPos.Y.Scale, startPos.Y.Offset + delta.Y
        )
    end
end)

-- === SADECE YÜRÜYEREK COIN AUTO FARM ===
local farming = false

farmBtn.MouseButton1Click:Connect(function()
    farming = not farming
    if farming then
        farmBtn.Text = "Otomatik Farm: AÇIK"
        farmBtn.BackgroundColor3 = Color3.fromRGB(50,200,110)
    else
        farmBtn.Text = "Otomatik Farm: KAPALI"
        farmBtn.BackgroundColor3 = Color3.fromRGB(57,170,225)
    end
end)

-- Coin isimlerini buradan düzenleyebilirsin!
local coinNames = {"Coin", "Coin_Server", "Collectible"}

function findCoins()
    local coins = {}
    for _, isim in ipairs(coinNames) do
        for _, obj in ipairs(ws:GetDescendants()) do
            if obj:IsA("BasePart") and obj.Name == isim then
                table.insert(coins, obj)
            end
        end
    end
    return coins
end

function walkTo(pos)
    local char = player.Character
    if not char then return end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    local humanoid = char:FindFirstChildWhichIsA("Humanoid")
    if not hrp or not humanoid then return end
    local path = PathfindingService:CreatePath({
        AgentRadius = 2,
        AgentHeight = 5,
        AgentCanJump = true,
        AgentJumpHeight = 7,
        AgentMaxSlope = 45,
        })
    path:ComputeAsync(hrp.Position, pos)
    if path.Status == Enum.PathStatus.Success then
        path:MoveTo(char)
        path.TraverserFinished:Wait()
    end
end

spawn(function()
    while true do
        if farming then
            local coins = findCoins()
            if #coins > 0 then
                walkTo(coins[1].Position)
            end
        end
        wait(0.5)
    end
end)
